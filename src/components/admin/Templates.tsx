import React, { useState, useEffect } from 'react';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Textarea } from '@/components/ui/textarea';
import { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { useToast } from '@/hooks/use-toast';
import { supabase } from '@/integrations/supabase/client';
import { Plus, RefreshCw, Edit, Eye, Trash2, Upload, Code, Palette, Sparkles } from 'lucide-react';
import { parseHtmlToBlocks } from '@/utils/htmlParsers/htmlToBlocks';

interface TemplateData {
  id: string;
  name: string;
  category: string;
  blocks: any[];
  user_id?: string;
  created_at?: string;
  updated_at?: string;
}

interface TemplatesByCategory {
  [category: string]: TemplateData[];
}

const categories = [
  { value: 'supplements', label: 'Suplementos' },
  { value: 'clothing', label: 'Roupas' },
  { value: 'accessories', label: 'Acess√≥rios' },
  { value: 'shoes', label: 'Cal√ßados' },
  { value: 'electronics', label: 'Eletr√¥nicos' },
  { value: 'energy', label: 'Energia' },
  { value: 'casa-decoracao', label: 'Casa e Decora√ß√£o' },
  { value: 'health', label: 'Sa√∫de' },
  { value: 'luxury', label: 'Luxo' },
  { value: 'adult', label: 'Adulto' },
  { value: 'other', label: 'Outros' },
];

// Templates premium atualizados com m√°ximo de blocos poss√≠veis
const createUpdatedPremiumTemplates = () => [
  {
    id: 'suplementos-premium-v2',
    name: 'Suplementos Premium',
    category: 'supplements',
    blocks: [
      {
        id: 'hero-1',
        type: 'hero',
        title: 'Banner Principal',
        heading: 'Transforme Seu Corpo com Suplementos Premium',
        subheading: 'Descubra o poder dos suplementos de alta performance que v√£o revolucionar seus resultados e acelerar seus objetivos fitness',
        buttonText: 'Comprar Agora',
        buttonUrl: '#comprar',
        image: { src: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b', alt: 'Suplementos Premium' },
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#0f172a', textColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'gallery-1',
        type: 'gallery',
        title: 'Galeria de Produtos',
        heading: 'Nossa Linha Premium de Suplementos',
        images: [
          { id: '1', src: 'https://images.unsplash.com/photo-1544947950-fa07a98d237f', alt: 'Whey Protein', caption: 'Whey Protein Isolado - 25g por dose' },
          { id: '2', src: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b', alt: 'Creatina', caption: 'Creatina Monohidratada - 5g pura' },
          { id: '3', src: 'https://images.unsplash.com/photo-1594736797933-d0501ba2fe65', alt: 'BCAA', caption: 'BCAA Premium - Propor√ß√£o 2:1:1' }
        ],
        visible: true,
        columns: 3,
        style: { padding: '60px 20px', backgroundColor: '#f8fafc' }
      },
      {
        id: 'benefits-1',
        type: 'benefits',
        title: 'Benef√≠cios',
        heading: 'Por que Escolher Nossos Suplementos Premium?',
        benefits: [
          { id: '1', title: 'Qualidade Farmac√™utica', description: 'Ingredientes de grau farmac√™utico com m√°xima pureza e biodisponibilidade', icon: 'üíä' },
          { id: '2', title: 'Resultados Comprovados', description: 'Testado e aprovado por atletas profissionais e estudos cient√≠ficos', icon: 'üèÜ' },
          { id: '3', title: 'Certifica√ß√µes Internacionais', description: 'Certificado pela ANVISA, FDA e com selo de pureza internacional', icon: '‚úÖ' }
        ],
        visible: true,
        columns: 3,
        style: { backgroundColor: '#ffffff', padding: '60px 20px' }
      },
      {
        id: 'imagetext-1',
        type: 'imageText',
        title: 'Imagem + Texto',
        heading: 'Ci√™ncia e Inova√ß√£o em Cada F√≥rmula',
        content: 'Nossos suplementos s√£o desenvolvidos com base em pesquisas cient√≠ficas de ponta, utilizando tecnologia de microencapsulamento para garantir m√°xima absor√ß√£o e efic√°cia. Cada ingrediente √© cuidadosamente selecionado e testado para entregar resultados superiores.',
        image: { src: 'https://images.unsplash.com/photo-1559757148-5c350d0d3c56', alt: 'Laborat√≥rio cient√≠fico' },
        visible: true,
        columns: 'full',
        style: { padding: '60px 20px', backgroundColor: '#f1f5f9' }
      },
      {
        id: 'textimage-1',
        type: 'textImage',
        title: 'Texto + Imagem',
        heading: 'Confian√ßa de Milhares de Atletas',
        content: 'Mais de 50.000 atletas profissionais e entusiastas do fitness confiam em nossos produtos para alcan√ßar seus objetivos. Desde iniciantes at√© campe√µes ol√≠mpicos, nossa linha premium oferece o suporte nutricional necess√°rio para superar limites.',
        image: { src: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b', alt: 'Atleta treinando' },
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#ffffff', padding: '60px 20px' }
      },
      {
        id: 'features-1',
        type: 'features',
        title: 'Recursos',
        heading: 'Tecnologia e Inova√ß√£o Premium',
        features: [
          { id: '1', title: 'Absor√ß√£o Ultra-R√°pida', description: 'Tecnologia de libera√ß√£o controlada para m√°xima biodisponibilidade', icon: '‚ö°' },
          { id: '2', title: 'Zero Aditivos Artificiais', description: 'F√≥rmula limpa sem corantes, conservantes ou a√ß√∫cares desnecess√°rios', icon: 'üåø' },
          { id: '3', title: 'Sabores Naturais', description: 'Desenvolvidos por especialistas em nutri√ß√£o esportiva', icon: 'üòã' }
        ],
        visible: true,
        columns: 3,
        style: { padding: '60px 20px', backgroundColor: '#f8fafc' }
      },
      {
        id: 'specifications-1',
        type: 'specifications',
        title: 'Especifica√ß√µes',
        heading: 'Informa√ß√µes T√©cnicas Detalhadas',
        specs: [
          { id: '1', name: 'Prote√≠na por dose', value: '25g (Whey Isolado)' },
          { id: '2', name: 'Amino√°cidos essenciais', value: '12g (perfil completo)' },
          { id: '3', name: 'Creatina monohidratada', value: '5g (99.9% pura)' },
          { id: '4', name: 'BCAA propor√ß√£o', value: '2:1:1 (Leucina:Isoleucina:Valina)' },
          { id: '5', name: 'Validade', value: '24 meses (lacrado)' },
          { id: '6', name: 'Origem', value: 'Estados Unidos (importado)' }
        ],
        visible: true,
        columns: 2,
        style: { backgroundColor: '#ffffff', padding: '60px 20px' }
      },
      {
        id: 'image-1',
        type: 'image',
        title: 'Imagem',
        image: { src: 'https://images.unsplash.com/photo-1594736797933-d0501ba2fe65', alt: 'Selo de Qualidade Premium' },
        visible: true,
        columns: 'full',
        style: { padding: '40px 20px', textAlign: 'center', backgroundColor: '#f1f5f9' }
      },
      {
        id: 'faq-1',
        type: 'faq',
        title: 'Perguntas Frequentes',
        heading: 'D√∫vidas Mais Comuns',
        faqs: [
          { id: '1', question: 'Como e quando devo tomar os suplementos?', answer: 'Recomendamos 1 dose de Whey (30g) p√≥s-treino, 1 dose de Creatina (5g) diariamente e BCAA durante o treino. Consulte sempre um nutricionista.' },
          { id: '2', question: 'Os suplementos t√™m efeitos colaterais?', answer: 'Nossos produtos s√£o seguros quando consumidos conforme as instru√ß√µes. S√£o livres de subst√¢ncias proibidas e testados para pureza.' },
          { id: '3', question: 'Qual a diferen√ßa para outros suplementos do mercado?', answer: 'Utilizamos ingredientes premium importados, tecnologia de microencapsulamento e temos certifica√ß√µes internacionais de qualidade.' },
          { id: '4', question: 'Posso combinar todos os produtos?', answer: 'Sim, nossa linha foi desenvolvida para ser complementar. Recomendamos seguir as dosagens indicadas e orienta√ß√£o profissional.' }
        ],
        visible: true,
        columns: 'full',
        style: { padding: '60px 20px', backgroundColor: '#f8fafc' }
      },
      {
        id: 'cta-1',
        type: 'cta',
        title: 'Chamada Para A√ß√£o',
        heading: 'Comece Sua Transforma√ß√£o Hoje!',
        description: 'N√£o deixe para amanh√£ o que voc√™ pode come√ßar hoje. Garante j√° seus suplementos premium e sinta a diferen√ßa nos primeiros dias de uso.',
        buttonText: 'Comprar Agora com 25% OFF',
        buttonUrl: '#comprar',
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#dc2626', textColor: '#ffffff', padding: '80px 20px', textAlign: 'center' }
      }
    ]
  },
  {
    id: 'moda-luxo-v2',
    name: 'Moda de Luxo Premium',
    category: 'clothing',
    blocks: [
      {
        id: 'hero-2',
        type: 'hero',
        title: 'Banner Principal',
        heading: 'Eleg√¢ncia Atemporal e Sofistica√ß√£o',
        subheading: 'Descubra nossa cole√ß√£o exclusiva de moda luxury crafted para ocasi√µes especiais e momentos √∫nicos',
        buttonText: 'Explorar Cole√ß√£o',
        buttonUrl: '#colecao',
        image: { src: 'https://images.unsplash.com/photo-1441986300917-64674bd600d8', alt: 'Moda de Luxo' },
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#111827', textColor: '#f9fafb', padding: '100px 20px' }
      },
      {
        id: 'gallery-2',
        type: 'gallery',
        title: 'Galeria da Cole√ß√£o',
        heading: 'Cole√ß√£o Exclusiva Outono/Inverno',
        images: [
          { id: '1', src: 'https://images.unsplash.com/photo-1515372039744-b8f02a3ae446', alt: 'Vestido de Gala', caption: 'Vestido de Gala - Seda Premium' },
          { id: '2', src: 'https://images.unsplash.com/photo-1566479179817-48ba2af16e9b', alt: 'Terno Sob Medida', caption: 'Terno Sob Medida - L√£ Italiana' },
          { id: '3', src: 'https://images.unsplash.com/photo-1469334031218-e382a71b716b', alt: 'Acess√≥rios de Luxo', caption: 'Acess√≥rios - Couro Leg√≠timo' }
        ],
        visible: true,
        columns: 3,
        style: { padding: '80px 20px', backgroundColor: '#f9fafb' }
      },
      {
        id: 'benefits-2',
        type: 'benefits',
        title: 'Benef√≠cios Exclusivos',
        heading: 'Por que Escolher Nossa Moda de Luxo?',
        benefits: [
          { id: '1', title: 'Materiais Nobres Importados', description: 'Tecidos premium importados da It√°lia e Fran√ßa com acabamento artesanal impec√°vel', icon: 'üëë' },
          { id: '2', title: 'Design Exclusivo e Atemporal', description: 'Pe√ßas √∫nicas desenvolvidas por estilistas renomados internacionalmente', icon: 'üé®' },
          { id: '3', title: 'Personaliza√ß√£o Completa', description: 'Servi√ßo de alfaiataria e ajustes personalizados para o caimento perfeito', icon: '‚ú®' }
        ],
        visible: true,
        columns: 3,
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'imagetext-2',
        type: 'imageText',
        title: 'Imagem + Texto',
        heading: 'Artesanato e Tradi√ß√£o em Cada Detalhe',
        content: 'Cada pe√ßa √© meticulosamente confeccionada por artes√£os especializados que preservam t√©cnicas tradicionais de alta costura. Utilizamos apenas materiais nobres e sustent√°veis, garantindo n√£o apenas beleza, mas tamb√©m responsabilidade ambiental e durabilidade excepcional.',
        image: { src: 'https://images.unsplash.com/photo-1503342217505-b0a15ec3261c', alt: 'Artes√£o trabalhando' },
        visible: true,
        columns: 'full',
        style: { padding: '80px 20px', backgroundColor: '#f3f4f6' }
      },
      {
        id: 'textimage-2',
        type: 'textImage',
        title: 'Texto + Imagem',
        heading: 'Inspira√ß√£o que Transcende Gera√ß√µes',
        content: 'Nossa filosofia combina heran√ßa cl√°ssica com vis√£o contempor√¢nea, criando pe√ßas que contam hist√≥rias e despertam emo√ß√µes. Cada cole√ß√£o √© uma jornada atrav√©s da eleg√¢ncia atemporal, pensada para mulheres e homens que valorizam a exclusividade e o refinamento.',
        image: { src: 'https://images.unsplash.com/photo-1521334884684-d80222895322', alt: 'Modelo elegante' },
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'features-2',
        type: 'features',
        title: 'Caracter√≠sticas Premium',
        heading: 'Excel√™ncia em Cada Aspecto',
        features: [
          { id: '1', title: 'Corte Sob Medida Premium', description: 'Ajuste anat√¥mico personalizado com at√© 3 provas inclu√≠das', icon: '‚úÇÔ∏è' },
          { id: '2', title: 'Sustentabilidade Certificada', description: 'Tecidos eco-friendly e processo produtivo carbono neutro', icon: 'üå±' },
          { id: '3', title: 'Acabamento Artesanal', description: 'Detalhes bordados √† m√£o e aplica√ß√µes exclusivas', icon: 'üñêÔ∏è' }
        ],
        visible: true,
        columns: 3,
        style: { padding: '80px 20px', backgroundColor: '#f9fafb' }
      },
      {
        id: 'specifications-2',
        type: 'specifications',
        title: 'Especifica√ß√µes de Materiais',
        heading: 'Composi√ß√£o e Cuidados Premium',
        specs: [
          { id: '1', name: 'Tecido Principal', value: 'Seda 100% natural (Mulberry)' },
          { id: '2', name: 'Forro', value: 'Algod√£o org√¢nico premium' },
          { id: '3', name: 'Acabamentos', value: 'Bordados √† m√£o com fios nobres' },
          { id: '4', name: 'Cuidados', value: 'Lavagem a seco especializada' },
          { id: '5', name: 'Origem', value: 'Ateli√™ em Mil√£o, It√°lia' },
          { id: '6', name: 'Garantia', value: '2 anos para defeitos de fabrica√ß√£o' }
        ],
        visible: true,
        columns: 2,
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'image-2',
        type: 'image',
        title: 'Certifica√ß√£o de Luxo',
        image: { src: 'https://images.unsplash.com/photo-1506744038136-46273834b3fb', alt: 'Certificado de Autenticidade' },
        visible: true,
        columns: 'full',
        style: { padding: '40px 20px', textAlign: 'center', backgroundColor: '#f3f4f6' }
      },
      {
        id: 'faq-2',
        type: 'faq',
        title: 'Perguntas Frequentes',
        heading: 'Informa√ß√µes Importantes',
        faqs: [
          { id: '1', question: 'Como funciona o processo de medi√ß√£o sob medida?', answer: 'Agendamos uma consulta presencial em nosso ateli√™ onde um especialista far√° as medi√ß√µes precisas e discutir√° prefer√™ncias de estilo.' },
          { id: '2', question: 'Qual o prazo para entrega de pe√ßas sob medida?', answer: 'Pe√ßas sob medida levam de 4 a 8 semanas, dependendo da complexidade. Pe√ßas prontas s√£o entregues em at√© 3 dias √∫teis.' },
          { id: '3', question: 'Voc√™s fazem ajustes ap√≥s a entrega?', answer: 'Sim, oferecemos ajustes gratuitos por at√© 30 dias ap√≥s a entrega para garantir o caimento perfeito.' },
          { id: '4', question: 'As pe√ßas possuem certificado de autenticidade?', answer: 'Todas as pe√ßas v√™m com certificado de autenticidade e cart√£o de cuidados personalizados.' }
        ],
        visible: true,
        columns: 'full',
        style: { padding: '80px 20px', backgroundColor: '#f9fafb' }
      },
      {
        id: 'cta-2',
        type: 'cta',
        title: 'Chamada Para A√ß√£o',
        heading: 'Eleve Seu Estilo ao Pr√≥ximo N√≠vel',
        description: 'Agende uma consulta exclusiva em nosso ateli√™ e descubra como a moda de luxo pode transformar n√£o apenas seu visual, mas sua confian√ßa.',
        buttonText: 'Agendar Consulta Exclusiva',
        buttonUrl: '#agendar',
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#1f2937', textColor: '#f9fafb', padding: '100px 20px', textAlign: 'center' }
      }
    ]
  },
  {
    id: 'acessorios-premium-v2',
    name: 'Acess√≥rios Premium Collection',
    category: 'accessories',
    blocks: [
      {
        id: 'hero-3',
        type: 'hero',
        title: 'Banner Principal',
        heading: 'Acess√≥rios que Definem Personalidade',
        subheading: 'Descubra nossa cole√ß√£o exclusiva de acess√≥rios premium que elevam qualquer look com sofistica√ß√£o e autenticidade',
        buttonText: 'Descobrir Cole√ß√£o',
        buttonUrl: '#colecao',
        image: { src: 'https://images.unsplash.com/photo-1503602642458-232111445657', alt: 'Acess√≥rios Premium' },
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#0c0a09', textColor: '#fafaf9', padding: '100px 20px' }
      },
      {
        id: 'gallery-3',
        type: 'gallery',
        title: 'Galeria Premium',
        heading: 'Cole√ß√£o Signature 2024',
        images: [
          { id: '1', src: 'https://images.unsplash.com/photo-1512436991641-6745cdb1723f', alt: 'Rel√≥gio de Luxo', caption: 'Rel√≥gio Swiss Made - Movimento Autom√°tico' },
          { id: '2', src: 'https://images.unsplash.com/photo-1523275335684-37898b6baf30', alt: '√ìculos Premium', caption: '√ìculos Artesanais - Acetato Italiano' },
          { id: '3', src: 'https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91', alt: 'J√≥ias Exclusivas', caption: 'Joias Autorais - Ouro 18k' }
        ],
        visible: true,
        columns: 3,
        style: { padding: '80px 20px', backgroundColor: '#fafaf9' }
      },
      {
        id: 'benefits-3',
        type: 'benefits',
        title: 'Benef√≠cios Exclusivos',
        heading: 'Por que Escolher Nossos Acess√≥rios Premium?',
        benefits: [
          { id: '1', title: 'Design Autoral e Exclusivo', description: 'Pe√ßas √∫nicas desenvolvidas por designers premiados internacionalmente', icon: 'üé®' },
          { id: '2', title: 'Materiais Nobres Certificados', description: 'Ouro, prata, couro leg√≠timo e pedras preciosas com certificado de origem', icon: 'üíé' },
          { id: '3', title: 'Versatilidade Premium', description: 'Combina perfeitamente com qualquer estilo, do casual ao formal', icon: 'üîÑ' }
        ],
        visible: true,
        columns: 3,
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'imagetext-3',
        type: 'imageText',
        title: 'Imagem + Texto',
        heading: 'Artesanato e Tecnologia em Harmonia',
        content: 'Cada acess√≥rio √© uma obra de arte funcional, onde tradi√ß√£o artesanal encontra inova√ß√£o tecnol√≥gica. Nossos mestres artes√£os utilizam t√©cnicas centen√°rias combinadas com ferramentas de precis√£o para criar pe√ßas que transcendem tend√™ncias e se tornam cl√°ssicos atemporais.',
        image: { src: 'https://images.unsplash.com/photo-1503602642458-232111445657', alt: 'Processo artesanal' },
        visible: true,
        columns: 'full',
        style: { padding: '80px 20px', backgroundColor: '#f5f5f4' }
      },
      {
        id: 'textimage-3',
        type: 'textImage',
        title: 'Texto + Imagem',
        heading: 'Cada Pe√ßa Conta uma Hist√≥ria',
        content: 'Nossos acess√≥rios n√£o s√£o apenas complementos, s√£o extens√µes da sua personalidade. Criados para acompanhar momentos especiais da vida, desde reuni√µes importantes at√© celebra√ß√µes √≠ntimas, cada pe√ßa carrega o peso da excel√™ncia e a leveza da beleza aut√™ntica.',
        image: { src: 'https://images.unsplash.com/photo-1523275335684-37898b6baf30', alt: 'Acess√≥rio em uso' },
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'features-3',
        type: 'features',
        title: 'Caracter√≠sticas Premium',
        heading: 'Excel√™ncia em Cada Detalhe',
        features: [
          { id: '1', title: 'Acabamento Artesanal Superior', description: 'Polimento manual e detalhes gravados com precis√£o microsc√≥pica', icon: 'üñêÔ∏è' },
          { id: '2', title: 'Resist√™ncia e Durabilidade', description: 'Materiais tratados contra oxida√ß√£o e desgaste com garantia estendida', icon: 'üîß' },
          { id: '3', title: 'Design Contempor√¢neo Atemporal', description: 'Est√©tica moderna que permanece relevante atrav√©s dos anos', icon: 'üÜï' }
        ],
        visible: true,
        columns: 3,
        style: { padding: '80px 20px', backgroundColor: '#fafaf9' }
      },
      {
        id: 'specifications-3',
        type: 'specifications',
        title: 'Especifica√ß√µes T√©cnicas',
        heading: 'Informa√ß√µes Detalhadas de Qualidade',
        specs: [
          { id: '1', name: 'Material Principal', value: 'A√ßo inoxid√°vel 316L e couro italiano' },
          { id: '2', name: 'Acabamento', value: 'PVD Gold / Polimento espelhado' },
          { id: '3', name: 'Resist√™ncia', value: '√Ågua at√© 50m / Anti-riscos' },
          { id: '4', name: 'Movimento (Rel√≥gios)', value: 'Su√≠√ßo autom√°tico / 42h reserva' },
          { id: '5', name: 'Garantia', value: '2 anos internacional' },
          { id: '6', name: 'Origem', value: 'Su√≠√ßa / It√°lia' }
        ],
        visible: true,
        columns: 2,
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'image-3',
        type: 'image',
        title: 'Certifica√ß√µes',
        image: { src: 'https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91', alt: 'Selos de Qualidade' },
        visible: true,
        columns: 'full',
        style: { padding: '40px 20px', textAlign: 'center', backgroundColor: '#f5f5f4' }
      },
      {
        id: 'faq-3',
        type: 'faq',
        title: 'Perguntas Frequentes',
        heading: 'Informa√ß√µes Importantes',
        faqs: [
          { id: '1', question: 'Como cuidar adequadamente dos acess√≥rios?', answer: 'Fornecemos kit de limpeza especializado e manual detalhado. Recomendamos limpeza semanal com produtos espec√≠ficos inclusos.' },
          { id: '2', question: 'Os acess√≥rios s√£o adequados para uso di√°rio?', answer: 'Sim, s√£o projetados para resistir ao uso cotidiano mantendo a beleza original. Todos possuem tratamentos anti-desgaste.' },
          { id: '3', question: 'Existe servi√ßo de manuten√ß√£o?', answer: 'Oferecemos manuten√ß√£o gratuita no primeiro ano e servi√ßo t√©cnico especializado com pe√ßas originais.' },
          { id: '4', question: 'Como verificar a autenticidade?', answer: 'Cada pe√ßa possui n√∫mero de s√©rie √∫nico e QR code para verifica√ß√£o de autenticidade em nosso site.' }
        ],
        visible: true,
        columns: 'full',
        style: { padding: '80px 20px', backgroundColor: '#fafaf9' }
      },
      {
        id: 'cta-3',
        type: 'cta',
        title: 'Chamada Para A√ß√£o',
        heading: 'Defina Seu Estilo √önico',
        description: 'Descubra como nossos acess√≥rios premium podem transformar sua presen√ßa e expressar sua personalidade de forma aut√™ntica e sofisticada.',
        buttonText: 'Explorar Cole√ß√£o Completa',
        buttonUrl: '#colecao',
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#78716c', textColor: '#fafaf9', padding: '100px 20px', textAlign: 'center' }
      }
    ]
  },
  {
    id: 'calcados-premium',
    name: 'Cal√ßados Premium Collection',
    category: 'shoes',
    blocks: [
      {
        id: 'hero-4',
        type: 'hero',
        title: 'Banner Principal',
        heading: 'Cal√ßados que Elevam Sua Jornada',
        subheading: 'Descubra nossa cole√ß√£o de cal√ßados premium onde conforto excepcional encontra design sofisticado para todos os momentos da sua vida',
        buttonText: 'Explorar Cole√ß√£o',
        buttonUrl: '#colecao',
        image: { src: 'https://images.unsplash.com/photo-1549298916-b41d501d3772', alt: 'Cal√ßados Premium' },
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#1c1917', textColor: '#fafaf9', padding: '100px 20px' }
      },
      {
        id: 'gallery-4',
        type: 'gallery',
        title: 'Galeria de Cal√ßados',
        heading: 'Cole√ß√£o Artesanal 2024',
        images: [
          { id: '1', src: 'https://images.unsplash.com/photo-1549298916-b41d501d3772', alt: 'Sapato Social', caption: 'Oxford Premium - Couro Leg√≠timo' },
          { id: '2', src: 'https://images.unsplash.com/photo-1551107696-a4b57a7739ce', alt: 'T√™nis Luxury', caption: 'T√™nis Artesanal - Linha Sport' },
          { id: '3', src: 'https://images.unsplash.com/photo-1543163521-1bf539c55dd2', alt: 'Bota Premium', caption: 'Bota Chelsea - Linha Heritage' }
        ],
        visible: true,
        columns: 3,
        style: { padding: '80px 20px', backgroundColor: '#fafaf9' }
      },
      {
        id: 'benefits-4',
        type: 'benefits',
        title: 'Benef√≠cios Premium',
        heading: 'Por que Escolher Nossos Cal√ßados?',
        benefits: [
          { id: '1', title: 'Conforto Anat√¥mico Superior', description: 'Palmilhas ortop√©dicas desenvolvidas com tecnologia NASA para m√°ximo conforto', icon: 'üëü' },
          { id: '2', title: 'Couro Premium Certificado', description: 'Couro leg√≠timo de origem controlada com curtimento ecol√≥gico premium', icon: 'üêÑ' },
          { id: '3', title: 'Artesanato Tradicional', description: 'Costurados √† m√£o por mestres sapateiros com t√©cnicas centen√°rias', icon: 'üî®' }
        ],
        visible: true,
        columns: 3,
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'imagetext-4',
        type: 'imageText',
        title: 'Imagem + Texto',
        heading: 'Tradi√ß√£o Familiar de Excel√™ncia',
        content: 'H√° mais de 80 anos nossa fam√≠lia dedica-se √† arte da sapataria premium. Cada par √© meticulosamente constru√≠do por artes√£os especializados que preservam t√©cnicas tradicionais europeias, combinando-as com tecnologia moderna para criar cal√ßados que duram gera√ß√µes.',
        image: { src: 'https://images.unsplash.com/photo-1549298916-b41d501d3772', alt: 'Artes√£o trabalhando' },
        visible: true,
        columns: 'full',
        style: { padding: '80px 20px', backgroundColor: '#f5f5f4' }
      },
      {
        id: 'textimage-4',
        type: 'textImage',
        title: 'Texto + Imagem',
        heading: 'Ci√™ncia do Conforto Premium',
        content: 'Desenvolvemos tecnologia pr√≥pria de amortecimento que distribui uniformemente o peso corporal, reduzindo impacto e fadiga. Nossos cal√ßados s√£o testados por pod√≥logos e atletas, garantindo que cada passo seja uma experi√™ncia de conforto excepcional.',
        image: { src: 'https://images.unsplash.com/photo-1551107696-a4b57a7739ce', alt: 'Tecnologia de conforto' },
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'features-4',
        type: 'features',
        title: 'Caracter√≠sticas T√©cnicas',
        heading: 'Inova√ß√£o em Cada Detalhe',
        features: [
          { id: '1', title: 'Sistema de Ventila√ß√£o', description: 'Microfuros invis√≠veis que permitem respirabilidade natural do p√©', icon: 'üí®' },
          { id: '2', title: 'Sola Anti-Fadiga', description: 'Tecnologia de retorno de energia que reduz cansa√ßo em 40%', icon: '‚ö°' },
          { id: '3', title: 'Impermeabiliza√ß√£o Natural', description: 'Tratamento especial que repele √°gua mantendo a respirabilidade', icon: '‚òî' }
        ],
        visible: true,
        columns: 3,
        style: { padding: '80px 20px', backgroundColor: '#fafaf9' }
      },
      {
        id: 'specifications-4',
        type: 'specifications',
        title: 'Especifica√ß√µes Premium',
        heading: 'Detalhes T√©cnicos e Materiais',
        specs: [
          { id: '1', name: 'Material Superior', value: 'Couro bovino premium full grain' },
          { id: '2', name: 'Forro', value: 'Couro de cabra natural respir√°vel' },
          { id: '3', name: 'Palmilha', value: 'Memory foam + gel anti-impacto' },
          { id: '4', name: 'Solado', value: 'Borracha natural + EVA composto' },
          { id: '5', name: 'Costura', value: 'Dupla costura √† m√£o refor√ßada' },
          { id: '6', name: 'Garantia', value: '3 anos contra defeitos' }
        ],
        visible: true,
        columns: 2,
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'image-4',
        type: 'image',
        title: 'Certifica√ß√£o Artesanal',
        image: { src: 'https://images.unsplash.com/photo-1543163521-1bf539c55dd2', alt: 'Selo de Qualidade Artesanal' },
        visible: true,
        columns: 'full',
        style: { padding: '40px 20px', textAlign: 'center', backgroundColor: '#f5f5f4' }
      },
      {
        id: 'faq-4',
        type: 'faq',
        title: 'Perguntas Frequentes',
        heading: 'Informa√ß√µes Importantes',
        faqs: [
          { id: '1', question: 'Como escolher o tamanho ideal?', answer: 'Oferecemos guia de medidas personalizado e servi√ßo de consultoria virtual para garantir o ajuste perfeito. Trocas gratuitas por at√© 60 dias.' },
          { id: '2', question: 'Os cal√ßados s√£o adequados para uso prolongado?', answer: 'Sim, s√£o projetados para conforto duradouro. Testados por profissionais que ficam em p√© mais de 8 horas di√°rias.' },
          { id: '3', question: 'Como fazer a manuten√ß√£o adequada?', answer: 'Inclu√≠mos kit completo de cuidados e oferecemos servi√ßo de restaura√ß√£o profissional anual gratuito no primeiro ano.' },
          { id: '4', question: 'Existe programa de fidelidade?', answer: 'Sim, clientes recebem pontos a cada compra e t√™m acesso a lan√ßamentos exclusivos e descontos especiais.' }
        ],
        visible: true,
        columns: 'full',
        style: { padding: '80px 20px', backgroundColor: '#fafaf9' }
      },
      {
        id: 'cta-4',
        type: 'cta',
        title: 'Chamada Para A√ß√£o',
        heading: 'Caminhe com Confian√ßa e Estilo',
        description: 'Invista em cal√ßados que acompanham sua jornada com conforto excepcional e eleg√¢ncia duradoura. Seus p√©s merecem o melhor.',
        buttonText: 'Encontrar Meu Cal√ßado Ideal',
        buttonUrl: '#colecao',
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#44403c', textColor: '#fafaf9', padding: '100px 20px', textAlign: 'center' }
      }
    ]
  },
  {
    id: 'casa-decoracao-premium',
    name: 'Casa e Decora√ß√£o Premium',
    category: 'casa-decoracao',
    blocks: [
      {
        id: 'hero-5',
        type: 'hero',
        title: 'Banner Principal',
        heading: 'Transforme Sua Casa em um Lar de Sonhos',
        subheading: 'Descubra nossa cole√ß√£o exclusiva de decora√ß√£o premium que transforma ambientes em espa√ßos √∫nicos e acolhedores',
        buttonText: 'Explorar Cole√ß√£o',
        buttonUrl: '#colecao',
        image: { src: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7', alt: 'Decora√ß√£o Premium' },
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#0f172a', textColor: '#f8fafc', padding: '100px 20px' }
      },
      {
        id: 'gallery-5',
        type: 'gallery',
        title: 'Galeria de Ambientes',
        heading: 'Ambientes Inspiradores 2024',
        images: [
          { id: '1', src: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7', alt: 'Sala de Estar', caption: 'Sala de Estar Moderna - Linha Signature' },
          { id: '2', src: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2', alt: 'Quarto Premium', caption: 'Quarto Master - Cole√ß√£o Dreams' },
          { id: '3', src: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136', alt: 'Cozinha Gourmet', caption: 'Cozinha Gourmet - Linha Chef' }
        ],
        visible: true,
        columns: 3,
        style: { padding: '80px 20px', backgroundColor: '#f8fafc' }
      },
      {
        id: 'benefits-5',
        type: 'benefits',
        title: 'Benef√≠cios Exclusivos',
        heading: 'Por que Escolher Nossa Decora√ß√£o Premium?',
        benefits: [
          { id: '1', title: 'Design Autoral Exclusivo', description: 'Pe√ßas √∫nicas desenvolvidas por designers renomados internacionalmente', icon: 'üé®' },
          { id: '2', title: 'Materiais Sustent√°veis Premium', description: 'Madeira certificada, tecidos org√¢nicos e acabamentos eco-friendly', icon: 'üåø' },
          { id: '3', title: 'Projeto Personalizado Completo', description: 'Consultoria decorativa completa com render 3D e acompanhamento', icon: 'üìê' }
        ],
        visible: true,
        columns: 3,
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'imagetext-5',
        type: 'imageText',
        title: 'Imagem + Texto',
        heading: 'Ambientes que Contam Sua Hist√≥ria',
        content: 'Cada pe√ßa da nossa cole√ß√£o √© cuidadosamente selecionada para criar ambientes que refletem personalidade e estilo de vida. Combinamos funcionalidade excepcional com est√©tica sofisticada, criando espa√ßos que inspiram e acolhem, transformando cada ambiente em uma extens√£o genu√≠na de quem voc√™ √©.',
        image: { src: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7', alt: 'Ambiente personalizado' },
        visible: true,
        columns: 'full',
        style: { padding: '80px 20px', backgroundColor: '#f1f5f9' }
      },
      {
        id: 'textimage-5',
        type: 'textImage',
        title: 'Texto + Imagem',
        heading: 'Sustentabilidade e Eleg√¢ncia Unidos',
        content: 'Nossa filosofia combina responsabilidade ambiental com design excepcional. Utilizamos apenas materiais certificados e processos eco-friendly, garantindo que a beleza dos seus ambientes n√£o comprometa o futuro do planeta. Cada pe√ßa carrega o selo de sustentabilidade sem abrir m√£o da sofistica√ß√£o.',
        image: { src: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2', alt: 'Materiais sustent√°veis' },
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'features-5',
        type: 'features',
        title: 'Caracter√≠sticas Premium',
        heading: 'Excel√™ncia em Cada Ambiente',
        features: [
          { id: '1', title: 'Consultoria Especializada', description: 'Arquitetos e designers dedicados para criar seu projeto ideal', icon: 'üë•' },
          { id: '2', title: 'Instala√ß√£o Profissional', description: 'Equipe t√©cnica especializada com garantia total de acabamento', icon: 'üîß' },
          { id: '3', title: 'P√≥s-Venda Premium', description: 'Manuten√ß√£o e cuidados especializados para vida longa das pe√ßas', icon: '‚≠ê' }
        ],
        visible: true,
        columns: 3,
        style: { padding: '80px 20px', backgroundColor: '#f8fafc' }
      },
      {
        id: 'specifications-5',
        type: 'specifications',
        title: 'Especifica√ß√µes de Materiais',
        heading: 'Qualidade em Cada Detalhe',
        specs: [
          { id: '1', name: 'Madeiras', value: 'Freij√≥, Nogueira e Carvalho certificados' },
          { id: '2', name: 'Tecidos', value: 'Algod√£o org√¢nico e linho premium' },
          { id: '3', name: 'Acabamentos', value: 'Verniz ecol√≥gico UV e √≥leos naturais' },
          { id: '4', name: 'Metais', value: 'A√ßo inox escovado e bronze patinado' },
          { id: '5', name: 'Garantia', value: '5 anos para estrutura e acabamentos' },
          { id: '6', name: 'Certifica√ß√µes', value: 'FSC, GREENGUARD e ISO 14001' }
        ],
        visible: true,
        columns: 2,
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'image-5',
        type: 'image',
        title: 'Selos de Qualidade',
        image: { src: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136', alt: 'Certifica√ß√µes Ambientais' },
        visible: true,
        columns: 'full',
        style: { padding: '40px 20px', textAlign: 'center', backgroundColor: '#f1f5f9' }
      },
      {
        id: 'faq-5',
        type: 'faq',
        title: 'Perguntas Frequentes',
        heading: 'Informa√ß√µes sobre Nossos Servi√ßos',
        faqs: [
          { id: '1', question: 'Como funciona a consultoria de decora√ß√£o?', answer: 'Oferecemos consulta inicial gratuita, levantamento das necessidades, projeto 3D personalizado e acompanhamento completo da execu√ß√£o.' },
          { id: '2', question: 'Qual o prazo para entrega e montagem?', answer: 'M√≥veis sob medida: 30-45 dias. Pe√ßas prontas: 7-15 dias. Agendamos montagem conforme sua disponibilidade.' },
          { id: '3', question: 'Voc√™s trabalham com financiamento?', answer: 'Sim, oferecemos parcelamento em at√© 24x sem juros e financiamento banc√°rio com condi√ß√µes especiais.' },
          { id: '4', question: 'Existe garantia para os m√≥veis e instala√ß√£o?', answer: 'Garantia de 5 anos para estrutura, 2 anos para acabamentos e 1 ano para instala√ß√£o com manuten√ß√£o gratuita.' }
        ],
        visible: true,
        columns: 'full',
        style: { padding: '80px 20px', backgroundColor: '#f8fafc' }
      },
      {
        id: 'cta-5',
        type: 'cta',
        title: 'Chamada Para A√ß√£o',
        heading: 'Realize o Lar dos Seus Sonhos',
        description: 'Agende uma consulta gratuita e descubra como podemos transformar seus ambientes em espa√ßos √∫nicos que refletem sua personalidade.',
        buttonText: 'Agendar Consulta Gratuita',
        buttonUrl: '#agendar',
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#1e40af', textColor: '#f8fafc', padding: '100px 20px', textAlign: 'center' }
      }
    ]
  },
  {
    id: 'liquidificador-gem-v2',
    name: 'Liquidificador Gem Blend Pro',
    category: 'electronics',
    blocks: [
      {
        id: 'hero-6',
        type: 'hero',
        title: 'Banner Principal',
        heading: 'Gem Blend Pro - Revolu√ß√£o na Sua Cozinha',
        subheading: 'O liquidificador mais potente e vers√°til do mercado, com tecnologia alem√£ e design premium para chefs exigentes',
        buttonText: 'Comprar Agora',
        buttonUrl: '#comprar',
        image: { src: 'https://images.unsplash.com/photo-1586201375761-83865001e1f5', alt: 'Liquidificador Gem Blend Pro' },
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#1e3a8a', textColor: '#f0f9ff', padding: '100px 20px' }
      },
      {
        id: 'gallery-6',
        type: 'gallery',
        title: 'Galeria do Produto',
        heading: 'Tecnologia e Design Premium',
        images: [
          { id: '1', src: 'https://images.unsplash.com/photo-1586201375761-83865001e1f5', alt: 'Gem Blend Pro', caption: 'Design Premium - A√ßo Escovado' },
          { id: '2', src: 'https://images.unsplash.com/photo-1590080877777-0a1a0a1a1a1a', alt: 'Motor Potente', caption: 'Motor 1500W - Tecnologia Alem√£' },
          { id: '3', src: 'https://images.unsplash.com/photo-1590080877777-0a1a0a1a1a1a', alt: 'L√¢minas Premium', caption: 'L√¢minas Titanium - Ultra Resistentes' }
        ],
        visible: true,
        columns: 3,
        style: { padding: '80px 20px', backgroundColor: '#f0f9ff' }
      },
      {
        id: 'benefits-6',
        type: 'benefits',
        title: 'Benef√≠cios Premium',
        heading: 'Por que o Gem Blend Pro √© Superior?',
        benefits: [
          { id: '1', title: 'Pot√™ncia Excepcional 1500W', description: 'Motor alem√£o de alta performance que tritura qualquer ingrediente', icon: '‚ö°' },
          { id: '2', title: 'Design Compacto Premium', description: 'Ocupa 40% menos espa√ßo mantendo m√°xima capacidade', icon: 'üìê' },
          { id: '3', title: 'Limpeza Autom√°tica', description: 'Sistema de auto-limpeza em 30 segundos', icon: 'üßº' }
        ],
        visible: true,
        columns: 3,
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'imagetext-6',
        type: 'imageText',
        title: 'Imagem + Texto',
        heading: 'Tecnologia Alem√£ de √öltima Gera√ß√£o',
        content: 'O Gem Blend Pro incorpora d√©cadas de engenharia alem√£ de precis√£o. Seu motor de 1500W com refrigera√ß√£o inteligente garante performance constante mesmo no uso intensivo. O sistema de l√¢minas em titanium foi projetado para durar d√©cadas mantendo a efici√™ncia original.',
        image: { src: 'https://images.unsplash.com/photo-1586201375761-83865001e1f5', alt: 'Tecnologia alem√£' },
        visible: true,
        columns: 'full',
        style: { padding: '80px 20px', backgroundColor: '#eff6ff' }
      },
      {
        id: 'textimage-6',
        type: 'textImage',
        title: 'Texto + Imagem',
        heading: 'Versatilidade para Chefs Profissionais',
        content: 'Com 12 velocidades pr√©-programadas e 5 programas autom√°ticos, o Gem Blend Pro atende desde smoothies delicados at√© preparos profissionais. Sua jarra de 2.2L em tritan livre de BPA suporta l√≠quidos quentes at√© 80¬∞C, permitindo preparar sopas cremosas diretamente no liquidificador.',
        image: { src: 'https://images.unsplash.com/photo-1590080877777-0a1a0a1a1a1a', alt: 'Chef profissional' },
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'features-6',
        type: 'features',
        title: 'Recursos Inovadores',
        heading: 'Tecnologia que Faz a Diferen√ßa',
        features: [
          { id: '1', title: 'Controle Digital Touch', description: 'Painel digital sens√≠vel ao toque com 12 programas pr√©-definidos', icon: 'üì±' },
          { id: '2', title: 'Jarra Dupla Fun√ß√£o', description: 'Tritan premium para frio e vidro temperado para preparos quentes', icon: 'üç∂' },
          { id: '3', title: 'Sistema Anti-Vibra√ß√£o', description: 'Base com absor√ß√£o de impacto para opera√ß√£o silenciosa', icon: 'üîá' }
        ],
        visible: true,
        columns: 3,
        style: { padding: '80px 20px', backgroundColor: '#f0f9ff' }
      },
      {
        id: 'specifications-6',
        type: 'specifications',
        title: 'Especifica√ß√µes T√©cnicas',
        heading: 'Detalhes T√©cnicos Profissionais',
        specs: [
          { id: '1', name: 'Pot√™ncia', value: '1500W (motor alem√£o)' },
          { id: '2', name: 'Capacidade', value: '2.2L (jarra principal)' },
          { id: '3', name: 'Velocidades', value: '12 + 5 programas autom√°ticos' },
          { id: '4', name: 'L√¢minas', value: '6 l√¢minas em titanium' },
          { id: '5', name: 'Peso', value: '4.2kg (base est√°vel)' },
          { id: '6', name: 'Garantia', value: '3 anos (motor) + 1 ano (acess√≥rios)' }
        ],
        visible: true,
        columns: 2,
        style: { backgroundColor: '#ffffff', padding: '80px 20px' }
      },
      {
        id: 'image-6',
        type: 'image',
        title: 'Certifica√ß√µes de Qualidade',
        image: { src: 'https://images.unsplash.com/photo-1590080877777-0a1a0a1a1a1a', alt: 'Selos de Qualidade Internacional' },
        visible: true,
        columns: 'full',
        style: { padding: '40px 20px', textAlign: 'center', backgroundColor: '#eff6ff' }
      },
      {
        id: 'faq-6',
        type: 'faq',
        title: 'Perguntas Frequentes',
        heading: 'Informa√ß√µes Importantes sobre o Produto',
        faqs: [
          { id: '1', question: 'O Gem Blend Pro funciona em 110V e 220V?', answer: 'Sim, possui chave seletora autom√°tica (bivolt) que se adapta automaticamente √† voltagem da sua casa.' },
          { id: '2', question: 'Qual a garantia e o que ela cobre?', answer: 'Garantia de 3 anos para motor, 1 ano para acess√≥rios. Cobertura total contra defeitos de fabrica√ß√£o e assist√™ncia t√©cnica nacional.' },
          { id: '3', question: 'Posso lavar todas as pe√ßas na lava-lou√ßas?', answer: 'Sim, jarra, tampa e l√¢minas s√£o totalmente compat√≠veis com lava-lou√ßas. A base deve ser limpa apenas com pano √∫mido.' },
          { id: '4', question: 'O liquidificador faz muito barulho?', answer: 'O sistema anti-vibra√ß√£o reduz o ru√≠do em 60% comparado a modelos convencionais, operando com apenas 75dB.' }
        ],
        visible: true,
        columns: 'full',
        style: { padding: '80px 20px', backgroundColor: '#f0f9ff' }
      },
      {
        id: 'cta-6',
        type: 'cta',
        title: 'Chamada Para A√ß√£o',
        heading: 'Revolucione Sua Cozinha Hoje!',
        description: 'N√£o perca a oportunidade de ter o liquidificador mais avan√ßado do mercado. Garantia estendida e frete gr√°tis para todo o Brasil.',
        buttonText: 'Comprar com 30% OFF',
        buttonUrl: '#comprar',
        visible: true,
        columns: 'full',
        style: { backgroundColor: '#1d4ed8', textColor: '#f0f9ff', padding: '100px 20px', textAlign: 'center' }
      }
    ]
  }
];

export const Templates: React.FC = () => {
  const [templates, setTemplates] = useState<TemplateData[]>([]);
  const [templatesByCategory, setTemplatesByCategory] = useState<TemplatesByCategory>({});
  const [loading, setLoading] = useState(true);
  const [selectedTemplate, setSelectedTemplate] = useState<TemplateData | null>(null);
  const [createDialogOpen, setCreateDialogOpen] = useState(false);
  const [editDialogOpen, setEditDialogOpen] = useState(false);
  const [viewDialogOpen, setViewDialogOpen] = useState(false);
  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);
  
  // Form states
  const [formName, setFormName] = useState('');
  const [formCategory, setFormCategory] = useState('other');
  const [formHtml, setFormHtml] = useState('');
  const [formDescription, setFormDescription] = useState('');
  
  const { toast } = useToast();

  const loadTemplates = async () => {
    try {
      setLoading(true);
      console.log('Carregando templates do Supabase...');
      
      const { data: session } = await supabase.auth.getSession();
      if (!session.session) {
        console.error('Usu√°rio n√£o autenticado');
        toast({
          title: "Erro de autentica√ß√£o",
          description: "Voc√™ precisa estar logado para ver os templates",
          variant: "destructive"
        });
        return;
      }

      const { data, error } = await supabase
        .from('templates')
        .select('*')
        .order('created_at', { ascending: false });

      if (error) {
        console.error('Erro ao carregar templates:', error);
        throw error;
      }

      console.log('Templates carregados do banco:', data?.length || 0);

      const formattedTemplates: TemplateData[] = (data || []).map(item => ({
        id: item.id,
        name: item.name,
        category: item.category,
        blocks: Array.isArray(item.blocks) ? item.blocks : [],
        user_id: item.user_id,
        created_at: item.created_at,
        updated_at: item.updated_at
      }));

      setTemplates(formattedTemplates);

      // Agrupar templates por categoria
      const grouped = formattedTemplates.reduce((acc: TemplatesByCategory, template) => {
        const category = template.category || 'other';
        if (!acc[category]) {
          acc[category] = [];
        }
        acc[category].push(template);
        return acc;
      }, {});

      setTemplatesByCategory(grouped);
    } catch (error) {
      console.error('Erro ao carregar templates:', error);
      toast({
        title: "Erro",
        description: "Erro ao carregar templates. Verifique sua conex√£o e tente novamente.",
        variant: "destructive"
      });
    } finally {
      setLoading(false);
    }
  };

  const seedPremiumTemplates = async () => {
    try {
      const { data: session } = await supabase.auth.getSession();
      if (!session.session) return;

      console.log('Iniciando atualiza√ß√£o completa dos templates...');

      // Deletar todos os templates existentes
      const { error: deleteError } = await supabase
        .from('templates')
        .delete()
        .neq('id', '00000000-0000-0000-0000-000000000000'); // Deletar todos

      if (deleteError) {
        console.error('Erro ao deletar templates:', deleteError);
      } else {
        console.log('Templates antigos removidos com sucesso');
      }

      // Inserir novos templates premium atualizados
      const updatedTemplates = createUpdatedPremiumTemplates();
      
      for (const template of updatedTemplates) {
        const { error } = await supabase
          .from('templates')
          .insert({
            name: template.name,
            category: template.category,
            blocks: template.blocks as any,
            user_id: session.session.user.id
          } as any);

        if (error) {
          console.error('Erro ao inserir template:', template.name, error);
        } else {
          console.log('Template criado:', template.name);
        }
      }

      toast({
        title: "‚ú® Atualiza√ß√£o Completa Realizada!",
        description: `${updatedTemplates.length} templates premium com m√°ximo de blocos foram criados com sucesso!`
      });

      await loadTemplates();
    } catch (error) {
      console.error('Erro ao atualizar templates:', error);
      toast({
        title: "Erro",
        description: "Erro na atualiza√ß√£o dos templates",
        variant: "destructive"
      });
    }
  };

  const getCategoryLabel = (category: string) => {
    const categoryData = categories.find(cat => cat.value === category);
    return categoryData?.label || category;
  };

  const handleCreate = async () => {
    if (!formName.trim()) {
      toast({
        title: "Erro",
        description: "Nome √© obrigat√≥rio",
        variant: "destructive"
      });
      return;
    }

    try {
      const { data: sessionData } = await supabase.auth.getSession();
      if (!sessionData.session) {
        throw new Error('Usu√°rio n√£o autenticado');
      }

      let blocks = [];
      
      if (formHtml.trim()) {
        try {
          blocks = parseHtmlToBlocks(formHtml);
        } catch (htmlError) {
          console.error('Erro ao converter HTML:', htmlError);
          toast({
            title: "Aviso",
            description: "N√£o foi poss√≠vel converter o HTML. Template criado sem blocos.",
            variant: "default"
          });
        }
      }

      const { data, error } = await supabase
        .from('templates')
        .insert({
          name: formName.trim(),
          category: formCategory,
          blocks: blocks as any,
          user_id: sessionData.session.user.id
        } as any)
        .select()
        .single();

      if (error) throw error;

      setFormName('');
      setFormCategory('other');
      setFormHtml('');
      setFormDescription('');
      setCreateDialogOpen(false);
      
      await loadTemplates();
      
      toast({
        title: "Sucesso",
        description: "Template criado com sucesso"
      });
    } catch (error) {
      console.error('Erro ao criar template:', error);
      toast({
        title: "Erro",
        description: "Erro ao criar template",
        variant: "destructive"
      });
    }
  };

  const handleEdit = (template: TemplateData) => {
    setSelectedTemplate(template);
    setFormName(template.name);
    setFormCategory(template.category);
    setFormHtml('');
    setFormDescription('');
    setEditDialogOpen(true);
  };

  const handleUpdate = async () => {
    if (!selectedTemplate || !formName.trim()) return;

    try {
      let blocksToUpdate = selectedTemplate.blocks;
      
      if (formHtml.trim()) {
        try {
          blocksToUpdate = parseHtmlToBlocks(formHtml);
        } catch (htmlError) {
          console.error('Erro ao converter HTML:', htmlError);
        }
      }

      const { error } = await supabase
        .from('templates')
        .update({
          name: formName.trim(),
          category: formCategory,
          blocks: blocksToUpdate,
          updated_at: new Date().toISOString()
        })
        .eq('id', selectedTemplate.id);

      if (error) throw error;

      setFormName('');
      setFormCategory('other');
      setFormHtml('');
      setFormDescription('');
      setEditDialogOpen(false);
      setSelectedTemplate(null);
      
      await loadTemplates();
      
      toast({
        title: "Sucesso",
        description: "Template atualizado com sucesso"
      });
    } catch (error) {
      console.error('Erro ao atualizar template:', error);
      toast({
        title: "Erro",
        description: "Erro ao atualizar template",
        variant: "destructive"
      });
    }
  };

  const handleView = (template: TemplateData) => {
    setSelectedTemplate(template);
    setViewDialogOpen(true);
  };

  const handleDelete = (template: TemplateData) => {
    setSelectedTemplate(template);
    setDeleteDialogOpen(true);
  };

  const confirmDelete = async () => {
    if (!selectedTemplate) return;

    try {
      const { error } = await supabase
        .from('templates')
        .delete()
        .eq('id', selectedTemplate.id);

      if (error) throw error;

      setDeleteDialogOpen(false);
      setSelectedTemplate(null);
      
      await loadTemplates();
      
      toast({
        title: "Sucesso",
        description: "Template exclu√≠do com sucesso"
      });
    } catch (error) {
      console.error('Erro ao deletar template:', error);
      toast({
        title: "Erro",
        description: "Erro ao excluir template",
        variant: "destructive"
      });
    }
  };

  const totalTemplates = templates.length;
  const categoriesCount = Object.keys(templatesByCategory).length;

  return (
    <div className="space-y-6">
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold tracking-tight flex items-center space-x-2">
            <Sparkles className="h-8 w-8 text-purple-600" />
            <span>Templates Premium Collection</span>
          </h1>
          <p className="text-muted-foreground">
            Gerencie os templates premium com m√°ximo de blocos ({totalTemplates} templates em {categoriesCount} categorias)
          </p>
        </div>
        <div className="flex items-center space-x-2">
          <Button
            variant="outline"
            onClick={loadTemplates}
            disabled={loading}
          >
            <RefreshCw className="h-4 w-4 mr-2" />
            Atualizar
          </Button>
          <Button
            className="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg"
            onClick={seedPremiumTemplates}
          >
            <Sparkles className="h-4 w-4 mr-2" />
            Implementar Atualiza√ß√£o Completa
          </Button>
          <Button onClick={() => setCreateDialogOpen(true)}>
            <Plus className="h-4 w-4 mr-2" />
            Novo Template
          </Button>
        </div>
      </div>

      {loading ? (
        <Card>
          <CardContent className="p-6">
            <div className="text-center">
              <p>Carregando templates...</p>
            </div>
          </CardContent>
        </Card>
      ) : totalTemplates === 0 ? (
        <Card className="border-2 border-dashed border-purple-200">
          <CardContent className="p-6">
            <div className="text-center space-y-4">
              <div className="mx-auto w-16 h-16 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full flex items-center justify-center">
                <Sparkles className="h-8 w-8 text-purple-600" />
              </div>
              <div>
                <h3 className="text-lg font-semibold">Nenhum template encontrado</h3>
                <p className="text-muted-foreground">
                  Clique em "Implementar Atualiza√ß√£o Completa" para gerar os novos templates premium.
                </p>
              </div>
              <div className="bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg border border-purple-200">
                <h4 className="font-semibold text-purple-800 mb-2">üéØ Novos Templates Premium:</h4>
                <ul className="text-sm text-purple-700 space-y-1">
                  <li>‚Ä¢ Suplementos Premium (10 blocos completos)</li>
                  <li>‚Ä¢ Moda de Luxo Premium (10 blocos completos)</li>
                  <li>‚Ä¢ Acess√≥rios Premium Collection (10 blocos completos)</li>
                  <li>‚Ä¢ Cal√ßados Premium Collection (10 blocos completos)</li>
                  <li>‚Ä¢ Casa e Decora√ß√£o Premium (10 blocos completos)</li>
                  <li>‚Ä¢ Liquidificador Gem Blend Pro (10 blocos completos)</li>
                </ul>
              </div>
            </div>
          </CardContent>
        </Card>
      ) : (
        <div className="space-y-6">
          {Object.entries(templatesByCategory).map(([category, categoryTemplates]) => (
            <Card key={category} className="border-2 border-purple-100">
              <CardHeader className="bg-gradient-to-r from-blue-50 to-purple-50">
                <div className="flex items-center justify-between">
                  <div>
                    <CardTitle className="flex items-center space-x-2">
                      <Palette className="h-5 w-5 text-purple-600" />
                      <span>{getCategoryLabel(category)}</span>
                      <Badge variant="secondary" className="bg-purple-100 text-purple-800">
                        {categoryTemplates.length} templates
                      </Badge>
                    </CardTitle>
                    <CardDescription>
                      Templates premium com m√°ximo de blocos para {getCategoryLabel(category)}
                    </CardDescription>
                  </div>
                </div>
              </CardHeader>
              <CardContent className="p-6">
                <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                  {categoryTemplates.map((template) => (
                    <Card key={template.id} className="cursor-pointer hover:shadow-lg transition-all duration-300 border-2 hover:border-purple-200 bg-gradient-to-br from-white to-purple-50">
                      <CardHeader className="pb-3">
                        <div className="flex items-center justify-between">
                          <CardTitle className="text-lg text-purple-800">{template.name}</CardTitle>
                          <div className="flex items-center space-x-2">
                            <Badge variant="outline" className="bg-blue-50 text-blue-700 border-blue-200">
                              {template.blocks?.length || 0} blocos
                            </Badge>
                            <div className="flex items-center text-sm text-purple-600 bg-purple-100 px-2 py-1 rounded-full">
                              <Sparkles className="h-3 w-3 mr-1" />
                              Premium
                            </div>
                          </div>
                        </div>
                      </CardHeader>
                      <CardContent>
                        <div className="space-y-3">
                          <div className="text-sm text-gray-600 bg-white/70 p-3 rounded-lg">
                            <strong>Estrutura completa:</strong> Banner, Galeria, Benef√≠cios, Imagem+Texto, Texto+Imagem, Recursos, Especifica√ß√µes, Imagem, FAQ, CTA
                          </div>
                          <div className="flex items-center justify-between">
                            <div className="text-xs text-purple-600 font-medium">
                              ‚ú® Sistema de colunas configur√°vel para todos os blocos
                            </div>
                            <div className="flex items-center space-x-2">
                              <Button
                                variant="ghost"
                                size="sm"
                                onClick={() => handleView(template)}
                                className="text-purple-600 hover:bg-purple-100"
                              >
                                <Eye className="h-4 w-4" />
                              </Button>
                              <Button
                                variant="ghost"
                                size="sm"
                                onClick={() => handleEdit(template)}
                                className="text-blue-600 hover:bg-blue-100"
                              >
                                <Edit className="h-4 w-4" />
                              </Button>
                              <Button
                                variant="ghost"
                                size="sm"
                                onClick={() => handleDelete(template)}
                                className="text-red-600 hover:bg-red-100"
                              >
                                <Trash2 className="h-4 w-4" />
                              </Button>
                            </div>
                          </div>
                        </div>
                      </CardContent>
                    </Card>
                  ))}
                </div>
              </CardContent>
            </Card>
          ))}
        </div>
      )}

      {/* Create Template Dialog */}
      <Dialog open={createDialogOpen} onOpenChange={setCreateDialogOpen}>
        <DialogContent className="max-w-2xl">
          <DialogHeader>
            <DialogTitle>Criar Novo Template</DialogTitle>
            <DialogDescription>
              Crie um novo template do zero ou importe de HTML
            </DialogDescription>
          </DialogHeader>
          
          <div className="space-y-4">
            <div className="space-y-2">
              <Label htmlFor="name">Nome do Template</Label>
              <Input
                id="name"
                value={formName}
                onChange={(e) => setFormName(e.target.value)}
                placeholder="Ex: Template Suplementos Premium"
                required
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="category">Categoria</Label>
              <Select value={formCategory} onValueChange={setFormCategory}>
                <SelectTrigger>
                  <SelectValue placeholder="Selecione uma categoria" />
                </SelectTrigger>
                <SelectContent>
                  {categories.map((cat) => (
                    <SelectItem key={cat.value} value={cat.value}>
                      {cat.label}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>
            </div>

            <Tabs defaultValue="manual" className="w-full">
              <TabsList className="grid w-full grid-cols-2">
                <TabsTrigger value="manual">Manual</TabsTrigger>
                <TabsTrigger value="html">Importar HTML</TabsTrigger>
              </TabsList>
              
              <TabsContent value="manual" className="space-y-4">
                <div className="space-y-2">
                  <Label htmlFor="description">Descri√ß√£o (opcional)</Label>
                  <Textarea
                    id="description"
                    value={formDescription}
                    onChange={(e) => setFormDescription(e.target.value)}
                    placeholder="Descreva o template..."
                    rows={3}
                  />
                </div>
                <p className="text-sm text-muted-foreground">
                  O template ser√° criado vazio e voc√™ poder√° adicionar blocos no editor principal.
                </p>
              </TabsContent>
              
              <TabsContent value="html" className="space-y-4">
                <div className="space-y-2">
                  <Label htmlFor="html">C√≥digo HTML</Label>
                  <Textarea
                    id="html"
                    value={formHtml}
                    onChange={(e) => setFormHtml(e.target.value)}
                    placeholder="Cole o c√≥digo HTML aqui..."
                    rows={10}
                    className="font-mono text-sm"
                  />
                </div>
                <p className="text-sm text-muted-foreground">
                  O HTML ser√° automaticamente convertido em blocos estruturados.
                </p>
              </TabsContent>
            </Tabs>
          </div>

          <DialogFooter>
            <Button
              variant="outline"
              onClick={() => setCreateDialogOpen(false)}
            >
              Cancelar
            </Button>
            <Button onClick={handleCreate}>
              <Upload className="h-4 w-4 mr-2" />
              Criar Template
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Edit Template Dialog */}
      <Dialog open={editDialogOpen} onOpenChange={setEditDialogOpen}>
        <DialogContent className="max-w-2xl">
          <DialogHeader>
            <DialogTitle>Editar Template</DialogTitle>
            <DialogDescription>
              Edite as informa√ß√µes do template ou atualize com novo HTML
            </DialogDescription>
          </DialogHeader>
          
          <div className="space-y-4">
            <div className="space-y-2">
              <Label htmlFor="edit-name">Nome do Template</Label>
              <Input
                id="edit-name"
                value={formName}
                onChange={(e) => setFormName(e.target.value)}
                placeholder="Ex: Template Suplementos Premium"
                required
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="edit-category">Categoria</Label>
              <Select value={formCategory} onValueChange={setFormCategory}>
                <SelectTrigger>
                  <SelectValue placeholder="Selecione uma categoria" />
                </SelectTrigger>
                <SelectContent>
                  {categories.map((cat) => (
                    <SelectItem key={cat.value} value={cat.value}>
                      {cat.label}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>
            </div>

            <div className="space-y-2">
              <Label htmlFor="edit-html">Atualizar com HTML (opcional)</Label>
              <Textarea
                id="edit-html"
                value={formHtml}
                onChange={(e) => setFormHtml(e.target.value)}
                placeholder="Cole novo c√≥digo HTML para substituir os blocos existentes..."
                rows={8}
                className="font-mono text-sm"
              />
              <p className="text-sm text-muted-foreground">
                Deixe vazio para manter os blocos existentes.
              </p>
            </div>
          </div>

          <DialogFooter>
            <Button
              variant="outline"
              onClick={() => setEditDialogOpen(false)}
            >
              Cancelar
            </Button>
            <Button onClick={handleUpdate}>
              Salvar Altera√ß√µes
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* View Template Dialog */}
      <Dialog open={viewDialogOpen} onOpenChange={setViewDialogOpen}>
        <DialogContent className="max-w-2xl">
          <DialogHeader>
            <DialogTitle>Visualizar Template</DialogTitle>
            <DialogDescription>
              Detalhes do template selecionado
            </DialogDescription>
          </DialogHeader>
          
          {selectedTemplate && (
            <div className="space-y-6">
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="text-sm font-medium text-muted-foreground">Nome</label>
                  <p className="text-sm">{selectedTemplate.name}</p>
                </div>
                <div>
                  <label className="text-sm font-medium text-muted-foreground">Categoria</label>
                  <div className="mt-1">
                    <Badge variant="secondary">{getCategoryLabel(selectedTemplate.category)}</Badge>
                  </div>
                </div>
              </div>

              <div>
                <label className="text-sm font-medium text-muted-foreground">ID</label>
                <p className="text-sm font-mono">{selectedTemplate.id}</p>
              </div>

              <div>
                <label className="text-sm font-medium text-muted-foreground">Criado por</label>
                <p className="text-sm">{selectedTemplate.user_id || 'Sistema'}</p>
              </div>

              <div>
                <label className="text-sm font-medium text-muted-foreground">
                  Blocos ({selectedTemplate.blocks?.length || 0})
                </label>
                <div className="mt-2 max-h-32 overflow-y-auto border rounded-md p-3">
                  {selectedTemplate.blocks && selectedTemplate.blocks.length > 0 ? (
                    <div className="space-y-2">
                      {selectedTemplate.blocks.map((block: any, index: number) => (
                        <div key={index} className="flex items-center justify-between text-sm">
                          <span>{block.type || 'Tipo desconhecido'}</span>
                          <Badge variant="outline" className="text-xs">
                            {block.title || `Bloco ${index + 1}`}
                          </Badge>
                        </div>
                      ))}
                    </div>
                  ) : (
                    <p className="text-sm text-muted-foreground">Nenhum bloco definido</p>
                  )}
                </div>
              </div>
            </div>
          )}
        </DialogContent>
      </Dialog>

      {/* Delete Template Dialog */}
      <Dialog open={deleteDialogOpen} onOpenChange={setDeleteDialogOpen}>
        <DialogContent>
          <DialogHeader>
            <DialogTitle className="flex items-center space-x-2">
              <Trash2 className="h-5 w-5 text-destructive" />
              <span>Excluir Template</span>
            </DialogTitle>
            <DialogDescription>
              Esta a√ß√£o n√£o pode ser desfeita. O template ser√° permanentemente removido do sistema.
            </DialogDescription>
          </DialogHeader>
          
          {selectedTemplate && (
            <div className="space-y-4">
              <div className="bg-muted p-4 rounded-md">
                <p className="font-medium">{selectedTemplate.name}</p>
                <p className="text-sm text-muted-foreground">Categoria: {getCategoryLabel(selectedTemplate.category)}</p>
                <p className="text-sm text-muted-foreground">
                  {selectedTemplate.blocks?.length || 0} blocos
                </p>
              </div>
            </div>
          )}

          <DialogFooter>
            <Button
              variant="outline"
              onClick={() => setDeleteDialogOpen(false)}
            >
              Cancelar
            </Button>
            <Button
              variant="destructive"
              onClick={confirmDelete}
            >
              Excluir Template
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>
    </div>
  );
};
